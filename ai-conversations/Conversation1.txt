AI-Conversations - Data Fetching
---------------------------------

Date : 20-10-2025
Tool : ChatGPT

My Prompt:
------
Write a Python function to fetch weather data from the wttr.in API for a given city. It should parse temperature, humidity, wind speed, and precipitation, and return them in a structured JSON or dictionary format. Handle possible connection or parsing errors.

AI Response (code excerpt):
---------------------------

import requests

def get_weather(city):
    try:
        url = f"https://wttr.in/{city}?format=j1"
        data = requests.get(url).json()
        current = data["current_condition"][0]
        return {
            "temp_C": current["temp_C"],
            "humidity": current["humidity"],
            "wind_speed_kmph": current["windspeedKmph"],
            "precip_mm": current["precipMM"]
        }
    except Exception as e:
        print("Error:", e)
        return None

Before (my version):
---------------------
I had simple code returning raw text from wttr.in (e.g., using '?format=3') â€” no structured parsing.

After (final version in `weather_data.py`):
-------------------------------------------
- Added `.json()` parsing from wttr.in.
- Included try/except with fallback default values.
- Added metric conversion and validation for missing keys.

Reflection:
-----------
This prompt helped me structure my data retrieval logic clearly and handle API errors gracefully. I first defined the problem, then refined it through iterative AI guidance. It improved data accuracy and reliability.
